{% extends "base.html" %}

{% block title %}Quiz Result: {{ quiz.quiz_title }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1>Quiz Result: {{ quiz.quiz_title }}</h1>

    <!-- Display the time when the quiz was taken -->
    <p><strong>Quiz taken on:</strong> {{ attempt.attempt_date|date:"F j, Y, g:i a" }}</p>

    <!-- Display total quiz duration (if applicable) -->
    {% if attempt.end_time %}
        <p><strong>Time spent:</strong> {{ attempt.end_time|timesince:attempt.attempt_date }}</p>
    {% endif %}

    <!-- Display the score -->
    <p><strong>Your score:</strong> {{ attempt.score }}%</p>

    <ul class="list-group mb-4">
        {% for answer in student_answers %}
        <li class="list-group-item">
            <strong>Question:</strong> {{ answer.question.question_text }}<br>
            <strong>Your Answer:</strong> {{ answer.selected_option.option_text }}<br>
            {% if answer.selected_option.is_correct %}
                <span class="badge bg-success">Correct</span>
            {% else %}
                <span class="badge bg-danger">Incorrect</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>

    <a href="{% url 'quiz:quiz_list' %}" class="btn btn-secondary">Back to Quiz List</a>
</div>
{% endblock %}
